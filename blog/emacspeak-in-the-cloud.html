<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-11-25 Thu 07:00 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacspeak In The Age Of Cloud Computing</title>
<meta name="author" content="T.V Raman" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacspeak In The Age Of Cloud Computing</h1>
<div id="outline-container-orgd973121" class="outline-2">
<h2 id="orgd973121"><span class="section-number-2">1.</span> Executive Summary</h2>
<div class="outline-text-2" id="text-1">
<p>
Emacspeak has supported <i>Cloud Computing</i> since 1995, i.e., long
before the term was invented.  I have used Emacs with Emacspeak
running on remote servers (called cloud-top in the rest of this
article) since that time, with a local speech server on my client
machine providing spoken feedback.  The underlying ssh-based scripts
have changed over time; this article documents what I have been using
for the last 7 years or more. As with everything else Linux, you
should not use this without understanding how it works. All of the
relevant code is checked into GitHub, but if you use it without
understanding, you are likely to get 2 for the price of 1ðŸ˜€.
</p>
</div>
</div>

<div id="outline-container-orgce224d0" class="outline-2">
<h2 id="orgce224d0"><span class="section-number-2">2.</span> The Basics</h2>
<div class="outline-text-2" id="text-2">
<ol class="org-ol">
<li>Emacspeak produces all spoken and non-spoken feedback via a <i>speech
server</i> &#x2014; see <a href="http://emacspeak.sourceforge.net/raman/publications/bc-emacspeak/">Emacspeak: Beautiful Code</a> for the detailed
architecture overview.</li>
<li>This server runs as a separate process and can either run <b>locally</b>
i.e. on the machine running emacs; it can also run <b>remotely</b>,
e.g. your laptop from which  you login to your cloud-top.</li>
<li>Note the <i>local</i> and <i>remote</i> terminology in the above &#x2014; to
Emacspeak, the machine where Emacs runs is the local machine, so
your machine in the cloud is <b>local</b> to Emacspeak.</li>
<li>Consequently, the machine from where you SSH to the cloud, a
laptop, a Raspberry Pi, or in a future a tin-can that you use as a
client is <b>remote</b> to emacspeak.</li>
</ol>
</div>
</div>

<div id="outline-container-org9d1d106" class="outline-2">
<h2 id="org9d1d106"><span class="section-number-2">3.</span> How It Works</h2>
<div class="outline-text-2" id="text-3">
<ol class="org-ol">
<li>When you start Emacs with Emacspeak loaded, Emacs starts the
speech-server as the first step in the emacspeak startup.
normally this starts the local server for your  prefered TTS engine.</li>
<li>See the emacspeak manual for how this speech-server is determined.</li>
<li>When running Emacspeak on a cloud-top, this <i>local speech server</i> is just a
simple shell script that connects to a local port  &#x2014; by default    <b>2222</b>.</li>
<li>When you connect to your cloud-top via SSH, you first <i>reverse port
forward</i> port <b>2222</b> from the cloud-top back to your client. This
causes data sent to port <b>2222</b> on the cloud-top by Emacs to show
up on port <b>2222</b> on the local machine where your speech server is listening.</li>
<li>With that reverse port forwarding in place and assuming that
<code>espeak</code> is your TTS engine, running the speech-server
<code>cloud-espeak</code> on the cloud-top connects back to your client to
produce spoken output.</li>
<li>For the previous step to work, something (or someone) needs to be
listening on port <b>2222</b> on your client.</li>
<li><p>
So you need to start the relevant speech server  on your client
before you <code>ssh</code> to your cloud-top &#x2014; in the case of <code>espeak</code>,
this is <code>ssh-espeak</code>.
</p>

<p>
See directory <code>bash-utils</code> in your emacspeak Git checkout for the
relevant Bash scripts.
</p></li>
</ol>
</div>
</div>

<div id="outline-container-org81b1ca8" class="outline-2">
<h2 id="org81b1ca8"><span class="section-number-2">4.</span> Workflow</h2>
<div class="outline-text-2" id="text-4">
<p>
  Here is what the workflow looks like, again, use this <b>only if</b>
  you have read and understood the previous section.
See<a href="https://github.com/tvraman/emacspeak/blob/master/bash-utils/remote#L8">Bash Utils</a> for the scripts mentioned below. Everything below
assumes a Bash Shell.
</p>

<p>
On your cloud-top, specify the speech-server to use by running
</p>

<pre class="example">
export DTK_PROGRAM=cloud-espeak
</pre>


<p>
You can put the above in your  <code>.bash_profile</code> on your cloud-top.
</p>

<p>
On your client device, run
</p>

<pre class="example">
. &lt;emacspeak_dir&gt;/bash-utils/remote
</pre>


<p>
This need be done only once per interactive shell.It defines <code>bash</code>
functions <span class="underline">remote</span> and <span class="underline">rtts</span>.
</p>

<p>
Next, run  Bash function <span class="underline">remote</span> defined in the script you just
loaded.
</p>

<pre class="example">
remote host.example.com  speech-server espeak
</pre>


<p>
This does the following:
</p>

<ol class="org-ol">
<li>Starts a local speech server for the TTS engine <code>espeak</code>.</li>
<li>Opens an SSH session to the cloud-top host.example.com.</li>
<li>Plays a musical chime (using <code>sox</code>) to cue completion.</li>
<li>Depending on your SSH setup, you may or may not need to type your
 ssh password at this point; avoiding having to type a password is
beyond the perview of this article, consult the SSH manual pages.</li>
<li>Now, run Emacs on  the cloud-top. Assuming that you have updated
your Emacs initialization to load Emacspeak, this will get
Emacspeak running on   the cloud-top talking on your client.</li>
<li>Note that typically, you should run something like <code>screen</code> on the
cloud-top and run Emacs within that <code>screen</code> session; this will let
you persist a running Emacs across multiple login/logout.</li>
</ol>
</div>
</div>

<div id="outline-container-org4676fc9" class="outline-2">
<h2 id="org4676fc9"><span class="section-number-2">5.</span> Experience On A Well-Configured Setup</h2>
<div class="outline-text-2" id="text-5">
<p>
On a well-configured setup, you typically need only do:
</p>

<ol class="org-ol">
<li>Run the bash function that starts the local TTS server, and then
connects to the cloud-top via SSH with reverse-port forwarding active.</li>
<li>Assuming there is an Emacs session running under screen at the
remote end, it'll start talking on your local client.</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2021-11-24 Wed 00:00</p>
<p class="author">Author: T.V Raman</p>
<p class="date">Created: 2021-11-25 Thu 07:00</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
